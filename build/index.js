(()=>{"use strict";const e=window.React,l=window.wp.blocks,a=window.wp.i18n,t=window.wp.blockEditor,o=window.wp.components,n=window.wp.element,r=JSON.parse('{"UU":"lazy-load-block/lazy-load-block"}'),c=(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},(0,e.createElement)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",fill:"currentColor"}));(0,l.registerBlockType)(r.UU,{icon:c,edit:function({attributes:l,setAttributes:r}){const{htmlContent:c,triggerType:i,triggerText:d,placeholderImage:m,showPlayIcon:s,placeholderText:p,showPlaceholder:b,autoLoadOnVisible:u,containerWidth:g,containerHeight:E,allowScripts:_}=l,[y,v]=(0,n.useState)("code"),h=(0,t.useBlockProps)({className:"lazy-load-block-editor"}),k="image"===i;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.InspectorControls,null,(0,e.createElement)(o.PanelBody,{title:(0,a.__)("Cómo funciona","lazy-load-block"),initialOpen:!1},(0,e.createElement)(o.__experimentalText,null,(0,a.__)("El contenido HTML que coloques aquí NO se cargará hasta que el usuario haga clic. Esto mejora tu PageSpeed porque el navegador no hace peticiones HTTP al contenido oculto.","lazy-load-block"))),(0,e.createElement)(o.PanelBody,{title:(0,a.__)("Imagen de placeholder","lazy-load-block"),initialOpen:!0},(0,e.createElement)(t.MediaUploadCheck,null,(0,e.createElement)(t.MediaUpload,{onSelect:e=>r({placeholderImage:e.url}),allowedTypes:["image"],value:m,render:({open:l})=>(0,e.createElement)("div",null,m?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("img",{src:m,alt:"",style:{width:"100%",marginBottom:"10px",borderRadius:"4px"}}),(0,e.createElement)(o.ButtonGroup,null,(0,e.createElement)(o.Button,{variant:"secondary",onClick:l},(0,a.__)("Cambiar","lazy-load-block")),(0,e.createElement)(o.Button,{variant:"tertiary",isDestructive:!0,onClick:()=>r({placeholderImage:""})},(0,a.__)("Eliminar","lazy-load-block")))):(0,e.createElement)(o.Button,{variant:"secondary",onClick:l},(0,a.__)("Seleccionar imagen","lazy-load-block")))})),m&&(0,e.createElement)(o.ToggleControl,{label:(0,a.__)("Mostrar icono de play","lazy-load-block"),checked:s,onChange:e=>r({showPlayIcon:e}),style:{marginTop:"15px"}})),(0,e.createElement)(o.PanelBody,{title:(0,a.__)("Tipo de activador","lazy-load-block"),initialOpen:!0},(0,e.createElement)(o.SelectControl,{label:(0,a.__)("¿Cómo se activa la carga?","lazy-load-block"),value:i,options:[{label:(0,a.__)("Imagen clickeable (limpio)","lazy-load-block"),value:"image"},{label:(0,a.__)("Botón","lazy-load-block"),value:"button"},{label:(0,a.__)("Enlace","lazy-load-block"),value:"link"}],onChange:e=>r({triggerType:e})}),"image"!==i&&(0,e.createElement)(o.TextControl,{label:(0,a.__)("Texto del botón/enlace","lazy-load-block"),value:d,onChange:e=>r({triggerText:e})}),"image"!==i&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.ToggleControl,{label:(0,a.__)("Mostrar texto descriptivo","lazy-load-block"),checked:b,onChange:e=>r({showPlaceholder:e})}),b&&(0,e.createElement)(o.TextControl,{label:(0,a.__)("Texto descriptivo","lazy-load-block"),value:p,onChange:e=>r({placeholderText:e})}))),(0,e.createElement)(o.PanelBody,{title:(0,a.__)("Dimensiones","lazy-load-block"),initialOpen:!1},(0,e.createElement)(o.TextControl,{label:(0,a.__)("Ancho","lazy-load-block"),value:g,onChange:e=>r({containerWidth:e}),help:"100%, 600px, 50vw..."}),(0,e.createElement)(o.TextControl,{label:(0,a.__)("Alto mínimo","lazy-load-block"),value:E,onChange:e=>r({containerHeight:e}),help:"auto, 400px, 50vh..."})),(0,e.createElement)(o.PanelBody,{title:(0,a.__)("Avanzado","lazy-load-block"),initialOpen:!1},(0,e.createElement)(o.ToggleControl,{label:(0,a.__)("Auto-cargar al ser visible","lazy-load-block"),checked:u,onChange:e=>r({autoLoadOnVisible:e}),help:(0,a.__)("Carga automáticamente cuando el bloque entra en el viewport.","lazy-load-block")}),(0,e.createElement)(o.ToggleControl,{label:(0,a.__)("Permitir scripts","lazy-load-block"),checked:_,onChange:e=>r({allowScripts:e})}),_&&(0,e.createElement)(o.Notice,{status:"warning",isDismissible:!1},(0,a.__)("Solo para administradores con permisos.","lazy-load-block")))),(0,e.createElement)("div",{...h},(0,e.createElement)("div",{className:"llb-editor-minimal"},(0,e.createElement)("div",{className:"llb-editor-toggle"},(0,e.createElement)(o.ButtonGroup,null,(0,e.createElement)(o.Button,{variant:"code"===y?"primary":"secondary",onClick:()=>v("code"),size:"small"},(0,a.__)("Código","lazy-load-block")),(0,e.createElement)(o.Button,{variant:"preview"===y?"primary":"secondary",onClick:()=>v("preview"),size:"small",disabled:!c&&!m},(0,a.__)("Vista previa","lazy-load-block")))),"code"===y?(0,e.createElement)(o.TextareaControl,{value:c,onChange:e=>r({htmlContent:e}),placeholder:(0,a.__)("Pega aquí el código HTML, iframe o embed...","lazy-load-block"),rows:6,className:"llb-code-editor"}):(0,e.createElement)("div",{className:"llb-preview-area"},k&&m?(0,e.createElement)("div",{className:"llb-preview-image-mode"},(0,e.createElement)("img",{src:m,alt:""}),s&&(0,e.createElement)("div",{className:"llb-preview-play"},(0,e.createElement)("svg",{viewBox:"0 0 24 24"},(0,e.createElement)("path",{d:"M8 5v14l11-7z",fill:"currentColor"})))):m?(0,e.createElement)("div",{className:"llb-preview-button-mode"},(0,e.createElement)("img",{src:m,alt:""}),b&&p&&(0,e.createElement)("p",null,p),(0,e.createElement)("button",{type:"button"},d)):(0,e.createElement)("div",{className:"llb-preview-button-mode"},b&&p&&(0,e.createElement)("p",null,p),(0,e.createElement)("button",{type:"button"},d))))))},save:function(){return null}})})();